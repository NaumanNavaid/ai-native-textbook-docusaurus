<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-part-2-ros/chapter-6-urdf-robot-description-tf-trees" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">URDF, Robot Description, TF Trees | Physical AI &amp; Humanoid Robotics</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="URDF, Robot Description, TF Trees | Physical AI &amp; Humanoid Robotics"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/ai-native-textbook-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees"><link data-rh="true" rel="alternate" href="https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees" hreflang="en"><link data-rh="true" rel="alternate" href="https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"URDF, Robot Description, TF Trees","item":"https://NaumanNavaid.github.io/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees"}]}</script><link rel="alternate" type="application/rss+xml" href="/ai-native-textbook-docusaurus/blog/rss.xml" title="Physical AI &amp; Humanoid Robotics RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ai-native-textbook-docusaurus/blog/atom.xml" title="Physical AI &amp; Humanoid Robotics Atom Feed"><link rel="stylesheet" href="/ai-native-textbook-docusaurus/assets/css/styles.537c1810.css">
<script src="/ai-native-textbook-docusaurus/assets/js/runtime~main.809c45bc.js" defer="defer"></script>
<script src="/ai-native-textbook-docusaurus/assets/js/main.dc2a0ec6.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="nm-custom-navbar"><div class="nm-navbar-container"><div class="nm-navbar-logo"><a class="nm-logo-link" href="/ai-native-textbook-docusaurus/"><div class="nm-logo-icon"><svg width="32" height="32" viewBox="0 0 32 32" fill="none"><rect width="32" height="32" rx="8" fill="currentColor"></rect><path d="M8 16C8 11.5817 11.5817 8 16 8C20.4183 8 24 11.5817 24 16C24 20.4183 20.4183 24 16 24C11.5817 24 8 20.4183 8 16Z" fill="var(--ifm-background-color)"></path><path d="M12 16L16 12L20 16M16 12V20" stroke="var(--ifm-color-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div class="nm-logo-text"><span class="nm-logo-title">Physical AI</span><span class="nm-logo-subtitle">&amp; Robotics</span></div></a></div><div class="nm-navbar-links"><a class="nm-nav-link" href="/ai-native-textbook-docusaurus/">Home</a><a class="nm-nav-link" href="/ai-native-textbook-docusaurus/chapters">Chapters</a><a class="nm-nav-link" href="/ai-native-textbook-docusaurus/docs/intro">Documentation</a><a class="nm-nav-link" href="/ai-native-textbook-docusaurus/about">About</a></div><div class="nm-navbar-actions"><div class="nm-search-container" style="margin-right:1rem"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><button class="nm-action-button color-mode-toggle" aria-label="Toggle dark mode"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button><a href="https://github.com/NaumanNavaid/ai-native-textbook-docusaurus" class="nm-action-button" aria-label="GitHub" target="_blank" rel="noopener noreferrer"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a><button class="nm-mobile-menu-toggle" aria-label="Toggle mobile menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu w-6 h-6" aria-hidden="true"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg></button></div></div></nav><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ai-native-textbook-docusaurus/"><b class="navbar__title text--truncate">Physical AI &amp; Robotics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ai-native-textbook-docusaurus/">Home</a><a class="navbar__item navbar__link" href="/ai-native-textbook-docusaurus/chapters">Chapters</a><a class="navbar__item navbar__link" href="/ai-native-textbook-docusaurus/docs/intro">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/NaumanNavaid/ai-native-textbook-docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ai-native-textbook-docusaurus/docs/part-1-foundations/chapter-1-what-is-physical-ai"><span title="Part 1: Foundations" class="categoryLinkLabel_W154">Part 1: Foundations</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-4-ros2-fundamentals"><span title="Part 2: ROS Fundamentals" class="categoryLinkLabel_W154">Part 2: ROS Fundamentals</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-4-ros2-fundamentals"><span title="ROS 2 Fundamentals" class="linkLabel_WmDU">ROS 2 Fundamentals</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-5-nodes-topics-services-actions"><span title="Nodes, Topics, Services, Actions" class="linkLabel_WmDU">Nodes, Topics, Services, Actions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees"><span title="URDF, Robot Description, TF Trees" class="linkLabel_WmDU">URDF, Robot Description, TF Trees</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ai-native-textbook-docusaurus/docs/part-3-simulation/chapter-7-gazebo-physics-simulation"><span title="Part 3: Simulation &amp; Digital Twins" class="categoryLinkLabel_W154">Part 3: Simulation &amp; Digital Twins</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ai-native-textbook-docusaurus/docs/part-4-perception/chapter-13-computer-vision-robots"><span title="Part 4: Perception &amp; State Estimation" class="categoryLinkLabel_W154">Part 4: Perception &amp; State Estimation</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ai-native-textbook-docusaurus/docs/part-5-embodied-intelligence/chapter-17-vision-language-action-models"><span title="Part 5: Embodied Intelligence" class="categoryLinkLabel_W154">Part 5: Embodied Intelligence</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ai-native-textbook-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Part 2: ROS Fundamentals</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">URDF, Robot Description, TF Trees</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1 id="urdf-robot-description-tf-trees">URDF, Robot Description, TF Trees</h1></header>
<h2 id="introduction">Introduction</h2>
<p>Robot description is a fundamental aspect of robotics that enables visualization, simulation, and control of robotic systems. The Unified Robot Description Format (URDF) provides a standardized way to define robot geometry, kinematics, and dynamics. Combined with the Transform (TF) library, it creates a powerful system for managing coordinate relationships in complex robotic systems. This chapter covers the complete pipeline from robot modeling to coordinate management.</p>
<admonition type="info"><p>URDF and TF form the backbone of ROS 2 robotics. Mastering these concepts is essential for anyone working with robotic systems, as they provide the foundation for everything from simulation to real-world robot control.</p></admonition>
<h2 id="61-urdf-fundamentals">6.1 URDF Fundamentals</h2>
<h3 id="611-urdf-structure-and-components">6.1.1 URDF Structure and Components</h3>
<p>URDF uses XML to describe robot models with links (rigid bodies) and joints (connections between links):</p>
<p><strong>Diagram: URDF Tree Structure</strong></p>
<pre><code>Robot Model (root)
├── Link: base_link
│   ├── Visual
│   │   ├── Geometry
│   │   └── Material
│   ├── Collision
│   │   └── Geometry
│   └── Inertial
│       ├── Mass
│       └── Inertia
│
├── Joint: base_to_chassis
│   ├── Parent: base_link
│   ├── Child: chassis_link
│   ├── Type: fixed
│   └── Origin
│
├── Link: chassis_link
│   ├── Visual/Collision/Inertial
│   └── ...
│
├── Joint: chassis_to_wheel_1
│   ├── Parent: chassis_link
│   ├── Child: wheel_1_link
│   ├── Type: continuous
│   └── Axis
│
└── Link: wheel_1_link
    └── Visual/Collision/Inertial
</code></pre>
<h3 id="612-link-elements">6.1.2 Link Elements</h3>
<p><strong>Visual Elements</strong>
Define how the link appears visually:</p>
<p><strong>Example: URDF Visual Element</strong></p>
<pre><code class="language-xml&lt;visual" metastring="name=&quot;chassis_visual&quot;&gt;">  &lt;!-- Origin of visual element relative to link origin --&gt;
  &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

  &lt;!-- Geometric shape --&gt;
  &lt;geometry&gt;
    &lt;box size=&quot;1.0 0.5 0.2&quot;/&gt;
    &lt;!-- Alternative geometries:
    &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.5&quot;/&gt;
    &lt;sphere radius=&quot;0.2&quot;/&gt;
    &lt;mesh filename=&quot;package://my_robot/meshes/chassis.stl&quot; scale=&quot;1 1 1&quot;/&gt;
    --&gt;
  &lt;/geometry&gt;

  &lt;!-- Material properties --&gt;
  &lt;material name=&quot;blue_material&quot;&gt;
    &lt;color rgba=&quot;0 0 1 1&quot;/&gt;
    &lt;!-- Alternative material definitions:
    &lt;texture filename=&quot;package://my_robot/textures/chassis.png&quot;/&gt;
    &lt;script&gt;
      &lt;uri&gt;file://my_material.material&lt;/uri&gt;
      &lt;name&gt;Blue&lt;/name&gt;
    &lt;/script&gt;
    --&gt;
  &lt;/material&gt;
&lt;/visual&gt;
</code></pre>
<p><strong>Collision Elements</strong>
Define collision geometry (can be simpler than visual):</p>
<p><strong>Example: URDF Collision Element</strong></p>
<pre><code class="language-xml&lt;collision" metastring="name=&quot;chassis_collision&quot;&gt;">  &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;geometry&gt;
    &lt;!-- Use simplified geometry for efficient collision detection --&gt;
    &lt;box size=&quot;0.95 0.45 0.18&quot;/&gt;
  &lt;/geometry&gt;
&lt;/collision&gt;

&lt;!-- Multiple collision elements for complex shapes --&gt;
&lt;collision name=&quot;camera_collision&quot;&gt;
  &lt;origin xyz=&quot;0.3 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;geometry&gt;
    &lt;cylinder radius=&quot;0.05&quot; length=&quot;0.1&quot;/&gt;
  &lt;/geometry&gt;
&lt;/collision&gt;
</code></pre>
<p><strong>Inertial Elements</strong>
Define physical properties for dynamics:</p>
<p><strong>Example: URDF Inertial Element</strong></p>
<pre><code class="language-xml&lt;inertial&gt;">  &lt;!-- Center of mass relative to link origin --&gt;
  &lt;origin xyz=&quot;0 0 0.05&quot; rpy=&quot;0 0 0&quot;/&gt;

  &lt;!-- Mass in kilograms --&gt;
  &lt;mass value=&quot;5.0&quot;/&gt;

  &lt;!-- Inertia tensor (3x3 matrix) in kg*m^2 --&gt;
  &lt;inertia ixx=&quot;0.1&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
            iyy=&quot;0.1&quot; iyz=&quot;0.0&quot;
            izz=&quot;0.2&quot;/&gt;
&lt;/inertial&gt;
</code></pre>
<h3 id="613-joint-types">6.1.3 Joint Types</h3>
<p><strong>Diagram: URDF Joint Types</strong></p>
<pre><code>Revolute Joint
[Link A] ──(θ)─── [Link B]
- Single axis rotation
- Limited range option
- Continuous or limited

Continuous Joint
[Link A] ──(∞)─── [Link B]
- Unlimited rotation
- Single axis
- Example: Wheels

Prismatic Joint
[Link A] ──↕─── [Link B]
- Linear motion
- Single axis
- Limited range

Fixed Joint
[Link A] ──⊗─── [Link B]
- No relative motion
- Rigid connection
- Base to ground

Floating Joint
[Link A] ──(6DOF)─── [Link B]
- 6 degrees of freedom
- Free motion
- Flying objects

Planar Joint
[Link A] ──(3DOF)─── [Link B]
- X, Y, Yaw motion
- Ground robots
- 2D navigation
</code></pre>
<p><strong>Example: URDF Joint Examples</strong></p>
<pre><code class="language-xml&lt;!--" metastring="Revolute joint with limits --&gt;">&lt;joint name=&quot;elbow_joint&quot; type=&quot;revolute&quot;&gt;
  &lt;parent link=&quot;upper_arm_link&quot;/&gt;
  &lt;child link=&quot;forearm_link&quot;/&gt;
  &lt;origin xyz=&quot;0 0 0.3&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;axis xyz=&quot;0 1 0&quot;/&gt;
  &lt;limit lower=&quot;-2.356&quot; upper=&quot;2.356&quot; effort=&quot;30.0&quot; velocity=&quot;1.0&quot;/&gt;
&lt;/joint&gt;

&lt;!-- Continuous joint for wheels --&gt;
&lt;joint name=&quot;wheel_1_joint&quot; type=&quot;continuous&quot;&gt;
  &lt;parent link=&quot;base_link&quot;/&gt;
  &lt;child link=&quot;wheel_1_link&quot;/&gt;
  &lt;origin xyz=&quot;0.2 0.2 -0.1&quot; rpy=&quot;1.5708 0 0&quot;/&gt;
  &lt;axis xyz=&quot;0 0 1&quot;/&gt;
&lt;/joint&gt;

&lt;!-- Prismatic joint for linear actuator --&gt;
&lt;joint name=&quot;linear_joint&quot; type=&quot;prismatic&quot;&gt;
  &lt;parent link=&quot;base_link&quot;/&gt;
  &lt;child link=&quot;slider_link&quot;/&gt;
  &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;axis xyz=&quot;0 0 1&quot;/&gt;
  &lt;limit lower=&quot;0.0&quot; upper=&quot;0.5&quot; effort=&quot;100.0&quot; velocity=&quot;0.1&quot;/&gt;
&lt;/joint&gt;

&lt;!-- Fixed joint for rigid connection --&gt;
&lt;joint name=&quot;camera_joint&quot; type=&quot;fixed&quot;&gt;
  &lt;parent link=&quot;base_link&quot;/&gt;
  &lt;child link=&quot;camera_link&quot;/&gt;
  &lt;origin xyz=&quot;0.3 0 0.2&quot; rpy=&quot;0 0.2&quot;/&gt;
&lt;/joint&gt;
</code></pre>
<h2 id="62-complete-robot-model-example">6.2 Complete Robot Model Example</h2>
<pre><code class="language-xml" metastring="title=&quot;Complete Mobile Robot URDF&quot;">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;robot name=&quot;mobile_robot&quot; xmlns:xacro=&quot;http://www.ros.org/wiki/xacro&quot;&gt;

  &lt;!-- Define materials --&gt;
  &lt;material name=&quot;blue&quot;&gt;
    &lt;color rgba=&quot;0 0 1 1&quot;/&gt;
  &lt;/material&gt;

  &lt;material name=&quot;black&quot;&gt;
    &lt;color rgba=&quot;0 0 0 1&quot;/&gt;
  &lt;/material&gt;

  &lt;material name=&quot;red&quot;&gt;
    &lt;color rgba=&quot;1 0 0 1&quot;/&gt;
  &lt;/material&gt;

  &lt;!-- Base link (robot footprint) --&gt;
  &lt;link name=&quot;base_footprint&quot;&gt;
    &lt;!-- Used for ground contact --&gt;
  &lt;/link&gt;

  &lt;!-- Base link (main chassis) --&gt;
  &lt;link name=&quot;base_link&quot;&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

    &lt;!-- Visual representation --&gt;
    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.4 0.3 0.2&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;blue&quot;/&gt;
    &lt;/visual&gt;

    &lt;!-- Collision geometry --&gt;
    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.4 0.3 0.2&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;

    &lt;!-- Inertial properties --&gt;
    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;5.0&quot;/&gt;
      &lt;inertia ixx=&quot;0.1&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.1&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.2&quot;/&gt;
    &lt;/inertial&gt;
  &lt;/link&gt;

  &lt;!-- Joint connecting base to footprint --&gt;
  &lt;joint name=&quot;base_footprint_joint&quot; type=&quot;fixed&quot;&gt;
    &lt;parent link=&quot;base_footprint&quot;/&gt;
    &lt;child link=&quot;base_link&quot;/&gt;
    &lt;origin xyz=&quot;0 0 0.05&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;/joint&gt;

  &lt;!-- Left wheel --&gt;
  &lt;link name=&quot;left_wheel_link&quot;&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;1.5708 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;black&quot;/&gt;
    &lt;/visual&gt;

    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;1.5708 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;

    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;0.5&quot;/&gt;
      &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.01&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.01&quot;/&gt;
    &lt;/inertial&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;left_wheel_joint&quot; type=&quot;continuous&quot;&gt;
    &lt;parent link=&quot;base_link&quot;/&gt;
    &lt;child link=&quot;left_wheel_link&quot;/&gt;
    &lt;origin xyz=&quot;-0.05 0.175 -0.05&quot; rpy=&quot;0 0 0&quot;/&gt;
    &lt;axis xyz=&quot;0 1 0&quot;/&gt;
  &lt;/joint&gt;

  &lt;!-- Right wheel --&gt;
  &lt;link name=&quot;right_wheel_link&quot;&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;1.5708 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;black&quot;/&gt;
    &lt;/visual&gt;

    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;1.5708 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;0.1&quot; length=&quot;0.05&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;

    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;0.5&quot;/&gt;
      &lt;inertia ixx=&quot;0.01&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.01&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.01&quot;/&gt;
    &lt;/inertial&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;right_wheel_joint&quot; type=&quot;continuous&quot;&gt;
    &lt;parent link=&quot;base_link&quot;/&gt;
    &lt;child link=&quot;right_wheel_link&quot;/&gt;
    &lt;origin xyz=&quot;-0.05 -0.175 -0.05&quot; rpy=&quot;0 0 0&quot;/&gt;
    &lt;axis xyz=&quot;0 1 0&quot;/&gt;
  &lt;/joint&gt;

  &lt;!-- Caster wheel --&gt;
  &lt;link name=&quot;caster_wheel_link&quot;&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;sphere radius=&quot;0.05&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;red&quot;/&gt;
    &lt;/visual&gt;

    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;sphere radius=&quot;0.05&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;

    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;0.3&quot;/&gt;
      &lt;inertia ixx=&quot;0.001&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.001&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.001&quot;/&gt;
    &lt;/inertial&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;caster_wheel_joint&quot; type=&quot;sphere&quot;&gt;
    &lt;parent link=&quot;base_link&quot;/&gt;
    &lt;child link=&quot;caster_wheel_link&quot;/&gt;
    &lt;origin xyz=&quot;0.15 0 -0.05&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;/joint&gt;

  &lt;!-- Camera --&gt;
  &lt;link name=&quot;camera_link&quot;&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.05 0.05 0.05&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;blue&quot;/&gt;
    &lt;/visual&gt;

    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;0.05 0.05 0.05&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;

    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;0.1&quot;/&gt;
      &lt;inertia ixx=&quot;0.001&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.001&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.001&quot;/&gt;
    &lt;/inertial&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;camera_joint&quot; type=&quot;fixed&quot;&gt;
    &lt;parent link=&quot;base_link&quot;/&gt;
    &lt;child link=&quot;camera_link&quot;/&gt;
    &lt;origin xyz=&quot;0.2 0 0.15&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;/joint&gt;

  &lt;!-- LiDAR --&gt;
  &lt;link name=&quot;laser_link&quot;&gt;
    &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;

    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;0.05&quot; length=&quot;0.1&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;red&quot;/&gt;
    &lt;/visual&gt;

    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;cylinder radius=&quot;0.05&quot; length=&quot;0.1&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;

    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;0.2&quot;/&gt;
      &lt;inertia ixx=&quot;0.001&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.001&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.001&quot;/&gt;
    &lt;/inertial&gt;
  &lt;/link&gt;

  &lt;joint name=&quot;laser_joint&quot; type=&quot;fixed&quot;&gt;
    &lt;parent link=&quot;base_link&quot;/&gt;
    &lt;child link=&quot;laser_link&quot;/&gt;
    &lt;origin xyz=&quot;0 0 0.25&quot; rpy=&quot;0 0 0&quot;/&gt;
  &lt;/joint&gt;

  &lt;!-- Gazebo specific settings --&gt;
  &lt;gazebo reference=&quot;left_wheel_link&quot;&gt;
    &lt;material&gt;Gazebo/Black&lt;/material&gt;
    &lt;mu1&gt;1.0&lt;/mu1&gt;
    &lt;mu2&gt;1.0&lt;/mu2&gt;
    &lt;kp&gt;1000000.0&lt;/kp&gt;
    &lt;kd&gt;1.0&lt;/kd&gt;
    &lt;minDepth&gt;0.001&lt;/minDepth&gt;
    &lt;maxVel&gt;1.0&lt;/maxVel&gt;
  &lt;/gazebo&gt;

  &lt;gazebo reference=&quot;right_wheel_link&quot;&gt;
    &lt;material&gt;Gazebo/Black&lt;/material&gt;
    &lt;mu1&gt;1.0&lt;/mu1&gt;
    &lt;mu2&gt;1.0&lt;/mu2&gt;
    &lt;kp&gt;1000000.0&lt;/kp&gt;
    &lt;kd&gt;1.0&lt;/kd&gt;
    &lt;minDepth&gt;0.001&lt;/minDepth&gt;
    &lt;maxVel&gt;1.0&lt;/maxVel&gt;
  &lt;/gazebo&gt;

&lt;/robot&gt;
</code></pre>
<h2 id="63-tf-transform-system">6.3 TF (Transform) System</h2>
<h3 id="631-coordinate-system-fundamentals">6.3.1 Coordinate System Fundamentals</h3>
<p>The TF system manages coordinate relationships between different parts of a robot:</p>
<p><strong>Diagram: TF Tree for Mobile Robot</strong></p>
<pre><code>map
  └─ odom
     └─ base_footprint
        └─ base_link
           ├─ left_wheel_link
           ├─ right_wheel_link
           ├─ caster_wheel_link
           ├─ camera_link
           │  └─ camera_optical_link
           └─ laser_link
</code></pre>
<p><strong>Example: TF Publisher Example</strong></p>
<pre><code class="language-pythonimport" metastring="rclpy">from rclpy.node import Node
import tf2_ros
import tf_transformations
from geometry_msgs.msg import TransformStamped
from nav_msgs.msg import Odometry

class TFPublisher(Node):
    def __init__(self):
        super().__init__(&#x27;tf_publisher&#x27;)

        # TF broadcaster
        self.tf_broadcaster = tf2_ros.TransformBroadcaster(self)

        # TF static broadcaster
        self.static_tf_broadcaster = tf2_ros.StaticTransformBroadcaster(self)

        # Publish static transforms
        self.publish_static_transforms()

        # Subscribe to odometry
        self.odom_sub = self.create_subscription(
            Odometry, &#x27;/odom&#x27;, self.odom_callback, 10)

        # Timer for periodic transforms
        self.timer = self.create_timer(0.05, self.publish_periodic_transforms)

        self.get_logger().info(&#x27;TF publisher initialized&#x27;)

    def publish_static_transforms(self):
        &quot;&quot;&quot;Publish static transforms that don&#x27;t change&quot;&quot;&quot;
        transforms = []

        # Camera to optical frame
        camera_to_optical = TransformStamped()
        camera_to_optical.header.stamp = self.get_clock().now().to_msg()
        camera_to_optical.header.frame_id = &quot;camera_link&quot;
        camera_to_optical.child_frame_id = &quot;camera_optical_link&quot;

        camera_to_optical.transform.translation.x = 0.0
        camera_to_optical.transform.translation.y = 0.0
        camera_to_optical.transform.translation.z = 0.0

        # Camera optical frame typically has different axis convention
        # X right, Y down, Z forward
        q = tf_transformations.quaternion_from_euler(-1.5708, 0, -1.5708)
        camera_to_optical.transform.rotation.x = q[0]
        camera_to_optical.transform.rotation.y = q[1]
        camera_to_optical.transform.rotation.z = q[2]
        camera_to_optical.transform.rotation.w = q[3]

        transforms.append(camera_to_optical)

        # Base footprint to base link
        footprint_to_base = TransformStamped()
        footprint_to_base.header.stamp = self.get_clock().now().to_msg()
        footprint_to_base.header.frame_id = &quot;base_footprint&quot;
        footprint_to_base.child_frame_id = &quot;base_link&quot;

        footprint_to_base.transform.translation.x = 0.0
        footprint_to_base.transform.translation.y = 0.0
        footprint_to_base.transform.translation.z = 0.05

        q = tf_transformations.quaternion_from_euler(0, 0, 0)
        footprint_to_base.transform.rotation.x = q[0]
        footprint_to_base.transform.rotation.y = q[1]
        footprint_to_base.transform.rotation.z = q[2]
        footprint_to_base.transform.rotation.w = q[3]

        transforms.append(footprint_to_base)

        # Send static transforms
        self.static_tf_broadcaster.sendTransform(transforms)

    def odom_callback(self, msg):
        &quot;&quot;&quot;Publish odom to base_link transform from odometry&quot;&quot;&quot;
        odom_to_base = TransformStamped()
        odom_to_base.header = msg.header
        odom_to_base.child_frame_id = msg.child_frame_id

        odom_to_base.transform.translation.x = msg.pose.pose.position.x
        odom_to_base.transform.translation.y = msg.pose.pose.position.y
        odom_to_base.transform.translation.z = msg.pose.pose.position.z

        odom_to_base.transform.rotation.x = msg.pose.pose.orientation.x
        odom_to_base.transform.rotation.y = msg.pose.pose.orientation.y
        odom_to_base.transform.rotation.z = msg.pose.pose.orientation.z
        odom_to_base.transform.rotation.w = msg.pose.pose.orientation.w

        self.tf_broadcaster.sendTransform(odom_to_base)

    def publish_periodic_transforms(self):
        &quot;&quot;&quot;Publish periodic transforms (e.g., for moving joints)&quot;&quot;&quot;
        transforms = []

        # Example: Simulate joint positions
        current_time = self.get_clock().now().seconds()

        # Left wheel joint
        left_wheel_transform = TransformStamped()
        left_wheel_transform.header.stamp = self.get_clock().now().to_msg()
        left_wheel_transform.header.frame_id = &quot;base_link&quot;
        left_wheel_transform.child_frame_id = &quot;left_wheel_link&quot;

        left_wheel_transform.transform.translation.x = -0.05
        left_wheel_transform.transform.translation.y = 0.175
        left_wheel_transform.transform.translation.z = -0.05

        # Rotate wheel based on time (simulated motion)
        wheel_angle = current_time * 2.0  # 2 rad/s
        q = tf_transformations.quaternion_from_euler(wheel_angle, 0, 0)
        left_wheel_transform.transform.rotation.x = q[0]
        left_wheel_transform.transform.rotation.y = q[1]
        left_wheel_transform.transform.rotation.z = q[2]
        left_wheel_transform.transform.rotation.w = q[3]

        transforms.append(left_wheel_transform)

        # Right wheel joint
        right_wheel_transform = TransformStamped()
        right_wheel_transform.header.stamp = self.get_clock().now().to_msg()
        right_wheel_transform.header.frame_id = &quot;base_link&quot;
        right_wheel_transform.child_frame_id = &quot;right_wheel_link&quot;

        right_wheel_transform.transform.translation.x = -0.05
        right_wheel_transform.transform.translation.y = -0.175
        right_wheel_transform.transform.translation.z = -0.05

        q = tf_transformations.quaternion_from_euler(wheel_angle, 0, 0)
        right_wheel_transform.transform.rotation.x = q[0]
        right_wheel_transform.transform.rotation.y = q[1]
        right_wheel_transform.transform.rotation.z = q[2]
        right_wheel_transform.transform.rotation.w = q[3]

        transforms.append(right_wheel_transform)

        # Send transforms
        self.tf_broadcaster.sendTransform(transforms)
</code></pre>
<h3 id="632-tf-listener-and-usage">6.3.2 TF Listener and Usage</h3>
<p><strong>Example: TF Listener Example</strong></p>
<pre><code class="language-pythonimport" metastring="rclpy">from rclpy.node import Node
import tf2_ros
import tf2_geometry_msgs
from geometry_msgs.msg import PointStamped
from sensor_msgs.msg import LaserScan

class TFListener(Node):
    def __init__(self):
        super().__init__(&#x27;tf_listener&#x27;)

        # TF buffer and listener
        self.tf_buffer = tf2_ros.Buffer()
        self.tf_listener = tf2_ros.TransformListener(self.tf_buffer)

        # Subscribe to sensor data
        self.laser_sub = self.create_subscription(
            LaserScan, &#x27;/laser/scan&#x27;, self.laser_callback, 10)

        # Publisher for transformed data
        self.transformed_point_pub = self.create_publisher(
            PointStamped, &#x27;/transformed_point&#x27;, 10)

        self.get_logger().info(&#x27;TF listener initialized&#x27;)

    def laser_callback(self, msg):
        &quot;&quot;&quot;Transform LiDAR data and process&quot;&quot;&quot;
        # Create point in laser frame
        laser_point = PointStamped()
        laser_point.header = msg.header
        laser_point.point.x = 1.0  # Point 1m in front of laser
        laser_point.point.y = 0.0
        laser_point.point.z = 0.0

        try:
            # Transform point from laser frame to base_link frame
            base_point = self.tf_buffer.transform(
                laser_point, &#x27;base_link&#x27;, timeout=rclpy.duration.Duration(seconds=1.0))

            # Publish transformed point
            self.transformed_point_pub.publish(base_point)

            self.get_logger().info(
                f&#x27;Transformed point: laser_frame ({laser_point.point.x:.2f}, {laser_point.point.y:.2f}) &#x27;
                f&#x27;-&gt; base_link ({base_point.point.x:.2f}, {base_point.point.y:.2f})&#x27;)

        except tf2_ros.TransformException as ex:
            self.get_logger().warn(f&#x27;Transform failed: {ex}&#x27;)

    def lookup_transform_example(self):
        &quot;&quot;&quot;Example of looking up transform&quot;&quot;&quot;
        try:
            # Get transform from base_link to camera_link
            transform = self.tf_buffer.lookup_transform(
                &#x27;base_link&#x27;, &#x27;camera_link&#x27;,
                rclpy.time.Time(),
                timeout=rclpy.duration.Duration(seconds=1.0))

            self.get_logger().info(
                f&#x27;Transform base_link -&gt; camera_link:\n&#x27;
                f&#x27;Translation: [{transform.transform.translation.x:.3f}, &#x27;
                f&#x27;{transform.transform.translation.y:.3f}, &#x27;
                f&#x27;{transform.transform.translation.z:.3f}]\n&#x27;
                f&#x27;Rotation: [{transform.transform.rotation.x:.3f}, &#x27;
                f&#x27;{transform.transform.rotation.y:.3f}, &#x27;
                f&#x27;{transform.transform.rotation.z:.3f}, &#x27;
                f&#x27;{transform.transform.rotation.w:.3f}]&#x27;)

        except tf2_ros.TransformException as ex:
            self.get_logger().warn(f&#x27;Lookup transform failed: {ex}&#x27;)

    def get_robot_pose_in_map(self):
        &quot;&quot;&quot;Get robot pose in map frame&quot;&quot;&quot;
        try:
            # Get transform from map to base_link
            map_to_base = self.tf_buffer.lookup_transform(
                &#x27;map&#x27;, &#x27;base_link&#x27;,
                rclpy.time.Time(),
                timeout=rclpy.duration.Duration(seconds=1.0))

            # Extract pose
            x = map_to_base.transform.translation.x
            y = map_to_base.transform.translation.y
            z = map_to_base.transform.translation.z

            # Convert quaternion to euler angles
            import tf_transformations
            q = [
                map_to_base.transform.rotation.x,
                map_to_base.transform.rotation.y,
                map_to_base.transform.rotation.z,
                map_to_base.transform.rotation.w
            ]
            roll, pitch, yaw = tf_transformations.euler_from_quaternion(q)

            self.get_logger().info(
                f&#x27;Robot pose in map: x={x:.2f}, y={y:.2f}, yaw={yaw:.2f}&#x27;)

            return {
                &#x27;x&#x27;: x, &#x27;y&#x27;: y, &#x27;z&#x27;: z,
                &#x27;roll&#x27;: roll, &#x27;pitch&#x27;: pitch, &#x27;yaw&#x27;: yaw
            }

        except tf2_ros.TransformException as ex:
            self.get_logger().warn(f&#x27;Get robot pose failed: {ex}&#x27;)
            return None

# Advanced TF operations
class AdvancedTFOperations(Node):
    def __init__(self):
        super().__init__(&#x27;advanced_tf_operations&#x27;)

        self.tf_buffer = tf2_ros.Buffer()
        self.tf_listener = tf2_ros.TransformListener(self.tf_buffer)

    def calculate_relative_pose(self, frame1, frame2, common_frame=&#x27;base_link&#x27;):
        &quot;&quot;&quot;Calculate relative pose between two frames&quot;&quot;&quot;
        try:
            # Get transform from common_frame to frame1
            common_to_1 = self.tf_buffer.lookup_transform(
                common_frame, frame1, rclpy.time.Time())

            # Get transform from common_frame to frame2
            common_to_2 = self.tf_buffer.lookup_transform(
                common_frame, frame2, rclpy.time.Time())

            # Calculate relative transform
            # frame1 -&gt; frame2 = (common_to_1)^-1 * common_to_2

            # This would require matrix operations in a real implementation
            # For simplicity, we&#x27;ll just return the transforms
            return common_to_1, common_to_2

        except tf2_ros.TransformException as ex:
            self.get_logger().error(f&#x27;Relative pose calculation failed: {ex}&#x27;)
            return None, None

    def transform_path(self, points, source_frame, target_frame):
        &quot;&quot;&quot;Transform a path of points from source to target frame&quot;&quot;&quot;
        transformed_points = []

        for point in points:
            point_stamped = PointStamped()
            point_stamped.header.stamp = self.get_clock().now().to_msg()
            point_stamped.header.frame_id = source_frame
            point_stamped.point.x = point[0]
            point_stamped.point.y = point[1]
            point_stamped.point.z = point[2]

            try:
                transformed = self.tf_buffer.transform(
                    point_stamped, target_frame,
                    timeout=rclpy.duration.Duration(seconds=0.1))

                transformed_points.append([
                    transformed.point.x,
                    transformed.point.y,
                    transformed.point.z
                ])

            except tf2_ros.TransformException as ex:
                self.get_logger().warn(f&#x27;Point transform failed: {ex}&#x27;)

        return transformed_points
</code></pre>
<h2 id="64-advanced-urdf-features">6.4 Advanced URDF Features</h2>
<h3 id="641-xacro-macros">6.4.1 Xacro Macros</h3>
<p>Xacro (XML Macros) enables reusable URDF components:</p>
<p><strong>Example: Xacro Macro for Wheel</strong></p>
<pre><code class="language-xml&lt;?xml" metastring="version=&quot;1.0&quot;?&gt;">&lt;robot xmlns:xacro=&quot;http://www.ros.org/wiki/xacro&quot;&gt;

  &lt;!-- Wheel macro --&gt;
  &lt;xacro:macro name=&quot;wheel&quot; params=&quot;prefix parent side mass:=0.5 radius:=0.1 length:=0.05&quot;&gt;
    &lt;link name=&quot;${prefix}_wheel_${side}_link&quot;&gt;
      &lt;inertial&gt;
        &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
        &lt;mass value=&quot;${mass}&quot;/&gt;
        &lt;inertia ixx=&quot;${mass*(3*radius*radius+length*length)/12}&quot;
                  ixy=&quot;0&quot; ixz=&quot;0&quot;
                  iyy=&quot;${mass*3*radius*radius/12}&quot;
                  iyz=&quot;0&quot;
                  izz=&quot;${mass*(3*radius*radius+length*length)/12}&quot;/&gt;
      &lt;/inertial&gt;

      &lt;visual&gt;
        &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;${&#x27;$&#x27;}{pi/2} 0 0&quot;/&gt;
        &lt;geometry&gt;
          &lt;cylinder radius=&quot;${radius}&quot; length=&quot;${length}&quot;/&gt;
        &lt;/geometry&gt;
        &lt;material name=&quot;black&quot;/&gt;
      &lt;/visual&gt;

      &lt;collision&gt;
        &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;${&#x27;$&#x27;}{pi/2} 0 0&quot;/&gt;
        &lt;geometry&gt;
          &lt;cylinder radius=&quot;${radius}&quot; length=&quot;${length}&quot;/&gt;
        &lt;/geometry&gt;
      &lt;/collision&gt;
    &lt;/link&gt;

    &lt;joint name=&quot;${prefix}_wheel_${side}_joint&quot; type=&quot;continuous&quot;&gt;
      &lt;parent link=&quot;${parent}&quot;/&gt;
      &lt;child link=&quot;${prefix}_wheel_${side}_link&quot;/&gt;
      &lt;xacro:if value=&quot;${side == &#x27;left&#x27;}&quot;&gt;
        &lt;origin xyz=&quot;-0.05 0.175 -0.05&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;/xacro:if&gt;
      &lt;xacro:if value=&quot;${side == &#x27;right&#x27;}&quot;&gt;
        &lt;origin xyz=&quot;-0.05 -0.175 -0.05&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;/xacro:if&gt;
      &lt;axis xyz=&quot;0 1 0&quot;/&gt;
    &lt;/joint&gt;

    &lt;gazebo reference=&quot;${prefix}_wheel_${side}_link&quot;&gt;
      &lt;material&gt;Gazebo/Black&lt;/material&gt;
      &lt;mu1&gt;1.0&lt;/mu1&gt;
      &lt;mu2&gt;1.0&lt;/mu2&gt;
      &lt;kp&gt;1000000.0&lt;/kp&gt;
      &lt;kd&gt;1.0&lt;/kd&gt;
      &lt;minDepth&gt;0.001&lt;/minDepth&gt;
      &lt;maxVel&gt;1.0&lt;/maxVel&gt;
    &lt;/gazebo&gt;
  &lt;/xacro:macro&gt;

  &lt;!-- Sensor macro --&gt;
  &lt;xacro:macro name=&quot;sensor&quot; params=&quot;prefix parent x y z r p y&quot;&gt;
    &lt;link name=&quot;${prefix}_link&quot;&gt;
      &lt;inertial&gt;
        &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
        &lt;mass value=&quot;0.1&quot;/&gt;
        &lt;inertia ixx=&quot;0.001&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                  iyy=&quot;0.001&quot; iyz=&quot;0.0&quot;
                  izz=&quot;0.001&quot;/&gt;
      &lt;/inertial&gt;

      &lt;visual&gt;
        &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
        &lt;geometry&gt;
          &lt;box size=&quot;0.05 0.05 0.05&quot;/&gt;
        &lt;/geometry&gt;
        &lt;material name=&quot;blue&quot;/&gt;
      &lt;/visual&gt;

      &lt;collision&gt;
        &lt;origin xyz=&quot;0 0 0&quot; rpy=&quot;0 0 0&quot;/&gt;
        &lt;geometry&gt;
          &lt;box size=&quot;0.05 0.05 0.05&quot;/&gt;
        &lt;/geometry&gt;
      &lt;/collision&gt;
    &lt;/link&gt;

    &lt;joint name=&quot;${prefix}_joint&quot; type=&quot;fixed&quot;&gt;
      &lt;parent link=&quot;${parent}&quot;/&gt;
      &lt;child link=&quot;${prefix}_link&quot;/&gt;
      &lt;origin xyz=&quot;${&#x27;$&#x27;}{x} ${&#x27;$&#x27;}{y} ${&#x27;$&#x27;}{z}&quot; rpy=&quot;${&#x27;$&#x27;}{r} ${&#x27;$&#x27;}{p} ${&#x27;$&#x27;}{y}&quot;/&gt;
    &lt;/joint&gt;
  &lt;/xacro:macro&gt;

&lt;/robot&gt;
</code></pre>
<p><strong>Example: Main Robot Xacro File</strong></p>
<pre><code class="language-xml&lt;?xml" metastring="version=&quot;1.0&quot;?&gt;">&lt;robot name=&quot;xacro_robot&quot; xmlns:xacro=&quot;http://www.ros.org/wiki/xacro&quot;&gt;

  &lt;!-- Include macro files --&gt;
  &lt;xacro:include filename=&quot;$(find my_robot)/urdf/macros.xacro&quot;/&gt;

  &lt;!-- Define properties --&gt;
  &lt;xacro:property name=&quot;wheel_radius&quot; value=&quot;0.1&quot;/&gt;
  &lt;xacro:property name=&quot;wheel_mass&quot; value=&quot;0.5&quot;/&gt;
  &lt;xacro:property name=&quot;robot_width&quot; value=&quot;0.4&quot;/&gt;
  &lt;xacro:property name=&quot;robot_length&quot; value=&quot;0.5&quot;/&gt;

  &lt;!-- Base link --&gt;
  &lt;link name=&quot;base_link&quot;&gt;
    &lt;inertial&gt;
      &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;mass value=&quot;5.0&quot;/&gt;
      &lt;inertia ixx=&quot;0.1&quot; ixy=&quot;0.0&quot; ixz=&quot;0.0&quot;
                iyy=&quot;0.1&quot; iyz=&quot;0.0&quot;
                izz=&quot;0.2&quot;/&gt;
    &lt;/inertial&gt;

    &lt;visual&gt;
      &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;${robot_length} ${robot_width} 0.2&quot;/&gt;
      &lt;/geometry&gt;
      &lt;material name=&quot;blue&quot;/&gt;
    &lt;/visual&gt;

    &lt;collision&gt;
      &lt;origin xyz=&quot;0 0 0.1&quot; rpy=&quot;0 0 0&quot;/&gt;
      &lt;geometry&gt;
        &lt;box size=&quot;${robot_length} ${robot_width} 0.2&quot;/&gt;
      &lt;/geometry&gt;
    &lt;/collision&gt;
  &lt;/link&gt;

  &lt;!-- Use wheel macro --&gt;
  &lt;xacro:wheel prefix=&quot;front&quot; parent=&quot;base_link&quot; side=&quot;left&quot;
               mass=&quot;${wheel_mass}&quot; radius=&quot;${wheel_radius}&quot;/&gt;
  &lt;xacro:wheel prefix=&quot;front&quot; parent=&quot;base_link&quot; side=&quot;right&quot;
               mass=&quot;${wheel_mass}&quot; radius=&quot;${wheel_radius}&quot;/&gt;
  &lt;xacro:wheel prefix=&quot;rear&quot; parent=&quot;base_link&quot; side=&quot;left&quot;
               mass=&quot;${wheel_mass}&quot; radius=&quot;${wheel_radius}&quot;/&gt;
  &lt;xacro:wheel prefix=&quot;rear&quot; parent=&quot;base_link&quot; side=&quot;right&quot;
               mass=&quot;${wheel_mass}&quot; radius=&quot;${wheel_radius}&quot;/&gt;

  &lt;!-- Use sensor macro --&gt;
  &lt;xacro:sensor prefix=&quot;camera&quot; parent=&quot;base_link&quot;
                 x=&quot;${robot_length/2}&quot; y=&quot;0&quot; z=&quot;0.15&quot; r=&quot;0&quot; p=&quot;0&quot; y=&quot;0&quot;/&gt;
  &lt;xacro:sensor prefix=&quot;laser&quot; parent=&quot;base_link&quot;
                 x=&quot;0&quot; y=&quot;0&quot; z=&quot;0.25&quot; r=&quot;0&quot; p=&quot;0&quot; y=&quot;0&quot;/&gt;

&lt;/robot&gt;
</code></pre>
<h2 id="65-kinematics-and-dynamics">6.5 Kinematics and Dynamics</h2>
<h3 id="651-forward-kinematics">6.5.1 Forward Kinematics</h3>
<p><strong>Example: Forward Kinematics Implementation</strong></p>
<pre><code class="language-pythonimport" metastring="numpy as np">import tf2_ros
from geometry_msgs.msg import TransformStamped

class RobotKinematics:
    def __init__(self):
        # Robot configuration (example 6-DOF arm)
        self.joint_names = [&#x27;joint1&#x27;, &#x27;joint2&#x27;, &#x27;joint3&#x27;, &#x27;joint4&#x27;, &#x27;joint5&#x27;, &#x27;joint6&#x27;]

        # DH parameters for a simple 6-DOF arm
        # a (link length), alpha (link twist), d (link offset), theta (joint angle)
        self.dh_parameters = [
            [0.0,  np.pi/2,  0.2,    0.0],    # Joint 1
            [0.4,  0.0,      0.0,    0.0],    # Joint 2
            [0.3,  0.0,      0.0,    0.0],    # Joint 3
            [0.0,  np.pi/2,  0.0,    0.0],    # Joint 4
            [0.0,  -np.pi/2, 0.15,   0.0],    # Joint 5
            [0.0,  0.0,      0.0,    0.0]     # Joint 6
        ]

        self.joint_positions = [0.0] * 6

    def dh_transform(self, a, alpha, d, theta):
        &quot;&quot;&quot;Create DH transformation matrix&quot;&quot;&quot;
        ct = np.cos(theta)
        st = np.sin(theta)
        ca = np.cos(alpha)
        sa = np.sin(alpha)

        T = np.array([
            [ct,      -st*ca,   st*sa,    a*ct],
            [st,       ct*ca,  -ct*sa,    a*st],
            [0.0,      sa,      ca,       d],
            [0.0,      0.0,     0.0,      1.0]
        ])

        return T

    def forward_kinematics(self, joint_angles=None):
        &quot;&quot;&quot;Calculate forward kinematics&quot;&quot;&quot;
        if joint_angles is None:
            joint_angles = self.joint_positions

        # Start with identity matrix
        T = np.eye(4)

        # Apply DH transformations
        for i, angle in enumerate(joint_angles):
            a, alpha, d, _ = self.dh_parameters[i]
            T_i = self.dh_transform(a, alpha, d, angle + self.dh_parameters[i][3])
            T = T @ T_i

        return T

    def get_joint_positions(self):
        &quot;&quot;&quot;Get current joint positions&quot;&quot;&quot;
        return self.joint_positions

    def set_joint_position(self, joint_idx, angle):
        &quot;&quot;&quot;Set individual joint position&quot;&quot;&quot;
        if 0 &lt;= joint_idx &lt; len(self.joint_positions):
            self.joint_positions[joint_idx] = angle

    def set_joint_positions(self, angles):
        &quot;&quot;&quot;Set all joint positions&quot;&quot;&quot;
        self.joint_positions = angles[:len(self.joint_positions)]

    def get_end_effector_pose(self):
        &quot;&quot;&quot;Get end-effector pose in homogeneous transform&quot;&quot;&quot;
        T = self.forward_kinematics()

        pose = {
            &#x27;position&#x27;: T[:3, 3],
            &#x27;orientation&#x27;: T[:3, :3],
            &#x27;homogeneous&#x27;: T
        }

        return pose

    def publish_tf_tree(self, tf_broadcaster, base_frame=&#x27;base_link&#x27;):
        &quot;&quot;&quot;Publish TF tree for current joint positions&quot;&quot;&quot;
        transforms = []

        # Current transformation
        T = np.eye(4)
        parent_frame = base_frame

        for i, angle in enumerate(self.joint_positions):
            a, alpha, d, _ = self.dh_parameters[i]
            T_i = self.dh_transform(a, alpha, d, angle + self.dh_parameters[i][3])
            T = T @ T_i

            # Create transform
            t = TransformStamped()
            t.header.stamp = self.get_clock().now().to_msg() if hasattr(self, &#x27;get_clock&#x27;) else None
            t.header.frame_id = parent_frame
            t.child_frame_id = f&#x27;link_{i+1}&#x27;

            # Extract translation
            t.transform.translation.x = T[0, 3]
            t.transform.translation.y = T[1, 3]
            t.transform.translation.z = T[2, 3]

            # Extract rotation (convert rotation matrix to quaternion)
            import tf_transformations
            q = tf_transformations.quaternion_from_matrix(T)
            t.transform.rotation.x = q[0]
            t.transform.rotation.y = q[1]
            t.transform.rotation.z = q[2]
            t.transform.rotation.w = q[3]

            transforms.append(t)
            parent_frame = f&#x27;link_{i+1}&#x27;

        return transforms

    def inverse_kinematics_simple(self, target_pose, max_iterations=100, tolerance=0.01):
        &quot;&quot;&quot;Simple inverse kinematics using iterative approach&quot;&quot;&quot;
        current_angles = self.joint_positions.copy()

        for iteration in range(max_iterations):
            # Forward kinematics with current angles
            T = self.forward_kinematics(current_angles)

            # Calculate error
            error_position = target_pose[&#x27;position&#x27;] - T[:3, 3]
            error_magnitude = np.linalg.norm(error_position)

            if error_magnitude &lt; tolerance:
                self.joint_positions = current_angles
                return current_angles

            # Simple gradient descent (simplified)
            # In practice, use more sophisticated IK methods
            learning_rate = 0.1
            delta_angles = learning_rate * error_position

            # Update angles (very simplified approach)
            for i in range(len(current_angles)):
                current_angles[i] += delta_angles[i % 3] * 0.1
                # Apply joint limits if needed
                current_angles[i] = np.clip(current_angles[i], -np.pi, np.pi)

        # Return best effort solution
        self.joint_positions = current_angles
        return current_angles

# Advanced kinematics with Jacobian
class AdvancedKinematics(RobotKinematics):
    def __init__(self):
        super().__init__()

    def compute_jacobian(self, joint_angles=None):
        &quot;&quot;&quot;Compute Jacobian matrix&quot;&quot;&quot;
        if joint_angles is None:
            joint_angles = self.joint_positions

        J = np.zeros((6, len(joint_angles)))

        # Numerical computation of Jacobian
        delta = 0.0001
        T_current = self.forward_kinematics(joint_angles)
        p_current = T_current[:3, 3]

        for i in range(len(joint_angles)):
            # Perturb joint i
            angles_perturbed = joint_angles.copy()
            angles_perturbed[i] += delta

            # Compute new pose
            T_perturbed = self.forward_kinematics(angles_perturbed)
            p_perturbed = T_perturbed[:3, 3]

            # Approximate derivative
            J[:3, i] = (p_perturbed - p_current) / delta

        # Orientation part of Jacobian (simplified)
        # In practice, use proper angular velocity Jacobian
        J[3:6, :] = 0.1 * np.random.randn(3, len(joint_angles))

        return J

    def inverse_kinematics_jacobian(self, target_pose, max_iterations=100, tolerance=0.01):
        &quot;&quot;&quot;Inverse kinematics using Jacobian method&quot;&quot;&quot;
        current_angles = self.joint_positions.copy()

        for iteration in range(max_iterations):
            # Forward kinematics
            T = self.forward_kinematics(current_angles)

            # Compute error
            error_position = target_pose[&#x27;position&#x27;] - T[:3, 3]
            error_magnitude = np.linalg.norm(error_position)

            if error_magnitude &lt; tolerance:
                self.joint_positions = current_angles
                return current_angles

            # Compute Jacobian
            J = self.compute_jacobian(current_angles)

            # Compute joint angle change using pseudo-inverse
            try:
                J_pinv = np.linalg.pinv(J)
                delta_angles = J_pinv @ np.concatenate([error_position, np.zeros(3)])

                # Update angles
                current_angles += delta_angles * 0.1  # Learning rate

                # Apply joint limits
                current_angles = np.clip(current_angles, -np.pi, np.pi)

            except np.linalg.LinAlgError:
                self.get_logger().error(&#x27;Jacobian singular&#x27;)
                break

        self.joint_positions = current_angles
        return current_angles
</code></pre>
<h2 id="summary">Summary</h2>
<p>This chapter covered the complete spectrum of robot description and coordinate management in ROS 2. We explored URDF modeling, the TF system, and advanced kinematic calculations essential for robotic applications.</p>
<p>Key takeaways:</p>
<ul>
<li>URDF provides standardized XML format for robot modeling</li>
<li>Links define physical properties (visual, collision, inertial)</li>
<li>Joints define relationships and motion between links</li>
<li>TF system manages coordinate relationships in real-time</li>
<li>Xacro macros enable reusable and parameterized URDF components</li>
<li>Forward/inverse kinematics are essential for robot control</li>
<li>Proper naming conventions and organization are crucial for maintainability</li>
</ul>
<h2 id="exercises">Exercises</h2>
<h3 id="exercise-61-urdf-robot-creation">Exercise 6.1: URDF Robot Creation</h3>
<p>Create a complete URDF model for a specific robot:</p>
<ul>
<li>Choose a robot type (mobile robot, arm, humanoid)</li>
<li>Define all links with proper visual, collision, and inertial properties</li>
<li>Create appropriate joints with realistic limits</li>
<li>Include sensors and actuators</li>
<li>Test in RViz and Gazebo</li>
</ul>
<h3 id="exercise-62-tf-tree-implementation">Exercise 6.2: TF Tree Implementation</h3>
<p>Implement a TF tree system:</p>
<ul>
<li>Create multiple coordinate frames</li>
<li>Publish static and dynamic transforms</li>
<li>Handle transform lookups with error management</li>
<li>Visualize TF tree in RViz</li>
<li>Test with different coordinate conversions</li>
</ul>
<h3 id="exercise-63-xacro-macro-system">Exercise 6.3: Xacro Macro System</h3>
<p>Develop a reusable Xacro system:</p>
<ul>
<li>Create macros for common components (wheels, sensors, joints)</li>
<li>Use properties for parameterization</li>
<li>Include conditional logic for different configurations</li>
<li>Validate generated URDF</li>
<li>Compare with non-xacro implementation</li>
</ul>
<h3 id="exercise-64-kinematics-implementation">Exercise 6.4: Kinematics Implementation</h3>
<p>Implement kinematics for a robot arm:</p>
<ul>
<li>Define DH parameters for 6-DOF arm</li>
<li>Implement forward kinematics</li>
<li>Create inverse kinematics solver</li>
<li>Test with various target poses</li>
<li>Analyze computational performance</li>
</ul>
<h3 id="exercise-65-complete-robot-integration">Exercise 6.5: Complete Robot Integration</h3>
<p>Integrate all concepts in a complete system:</p>
<ul>
<li>Create complex robot URDF with Xacro</li>
<li>Implement TF publishing and listening</li>
<li>Add kinematics calculations</li>
<li>Integrate with robot control</li>
<li>Validate with simulation and visualization</li>
</ul>
<h2 id="glossary-terms">Glossary Terms</h2>
<ul>
<li><strong>URDF (Unified Robot Description Format)</strong>: XML format for describing robot models</li>
<li><strong>Link</strong>: Rigid body in robot model with visual, collision, and inertial properties</li>
<li><strong>Joint</strong>: Connection between links that defines relative motion</li>
<li><strong>TF (Transform)</strong>: System for managing coordinate relationships</li>
<li><strong>Coordinate Frame</strong>: Reference system for position and orientation</li>
<li><strong>Transform Tree</strong>: Hierarchical structure of coordinate relationships</li>
<li><strong>Xacro</strong>: XML macro language for creating reusable URDF components</li>
<li><strong>Forward Kinematics</strong>: Computing end-effector pose from joint angles</li>
<li><strong>Inverse Kinematics</strong>: Computing joint angles from desired end-effector pose</li>
<li><strong>DH (Denavit-Hartenberg) Parameters</strong>: Standardized way to describe robot linkages</li>
<li><strong>Jacobian Matrix</strong>: Matrix of partial derivatives relating joint velocities to end-effector velocities</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/NaumanNavaid/ai-native-textbook-docusaurus/tree/main/docs/part-2-ros/chapter-6-urdf-robot-description-tf-trees.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-5-nodes-topics-services-actions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Nodes, Topics, Services, Actions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ai-native-textbook-docusaurus/docs/part-3-simulation/chapter-7-gazebo-physics-simulation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Gazebo Physics Simulation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#61-urdf-fundamentals" class="table-of-contents__link toc-highlight">6.1 URDF Fundamentals</a><ul><li><a href="#611-urdf-structure-and-components" class="table-of-contents__link toc-highlight">6.1.1 URDF Structure and Components</a></li><li><a href="#612-link-elements" class="table-of-contents__link toc-highlight">6.1.2 Link Elements</a></li><li><a href="#613-joint-types" class="table-of-contents__link toc-highlight">6.1.3 Joint Types</a></li></ul></li><li><a href="#62-complete-robot-model-example" class="table-of-contents__link toc-highlight">6.2 Complete Robot Model Example</a></li><li><a href="#63-tf-transform-system" class="table-of-contents__link toc-highlight">6.3 TF (Transform) System</a><ul><li><a href="#631-coordinate-system-fundamentals" class="table-of-contents__link toc-highlight">6.3.1 Coordinate System Fundamentals</a></li><li><a href="#632-tf-listener-and-usage" class="table-of-contents__link toc-highlight">6.3.2 TF Listener and Usage</a></li></ul></li><li><a href="#64-advanced-urdf-features" class="table-of-contents__link toc-highlight">6.4 Advanced URDF Features</a><ul><li><a href="#641-xacro-macros" class="table-of-contents__link toc-highlight">6.4.1 Xacro Macros</a></li></ul></li><li><a href="#65-kinematics-and-dynamics" class="table-of-contents__link toc-highlight">6.5 Kinematics and Dynamics</a><ul><li><a href="#651-forward-kinematics" class="table-of-contents__link toc-highlight">6.5.1 Forward Kinematics</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#exercises" class="table-of-contents__link toc-highlight">Exercises</a><ul><li><a href="#exercise-61-urdf-robot-creation" class="table-of-contents__link toc-highlight">Exercise 6.1: URDF Robot Creation</a></li><li><a href="#exercise-62-tf-tree-implementation" class="table-of-contents__link toc-highlight">Exercise 6.2: TF Tree Implementation</a></li><li><a href="#exercise-63-xacro-macro-system" class="table-of-contents__link toc-highlight">Exercise 6.3: Xacro Macro System</a></li><li><a href="#exercise-64-kinematics-implementation" class="table-of-contents__link toc-highlight">Exercise 6.4: Kinematics Implementation</a></li><li><a href="#exercise-65-complete-robot-integration" class="table-of-contents__link toc-highlight">Exercise 6.5: Complete Robot Integration</a></li></ul></li><li><a href="#glossary-terms" class="table-of-contents__link toc-highlight">Glossary Terms</a></li></ul></div></div></div></div></main></div></div></div><footer class="nm-custom-footer" data-testid="custom-footer"><div class="nm-footer-container"><div class="nm-footer-grid"><div class="nm-footer-brand"><div class="nm-footer-logo"><h3>Physical AI &amp; Robotics</h3><p>An AI-Native Engineering Textbook</p></div><p class="nm-footer-description">Master the convergence of artificial intelligence and physical robotics through comprehensive, hands-on learning experiences.</p><div class="nm-footer-stats"><div class="nm-stat"><div class="nm-stat-number">1000+</div><div class="nm-stat-label">Pages</div></div><div class="nm-stat"><div class="nm-stat-number">50+</div><div class="nm-stat-label">Exercises</div></div><div class="nm-stat"><div class="nm-stat-number">24/7</div><div class="nm-stat-label">Access</div></div></div></div><div class="nm-footer-section"><h4 class="nm-footer-heading">Resources</h4><ul class="nm-footer-links"><li><a href="/ai-native-textbook-docusaurus/docs/part-1-foundations/chapter-1-what-is-physical-ai">Foundations</a></li><li><a href="/ai-native-textbook-docusaurus/docs/part-2-ros/chapter-4-ros2-fundamentals">ROS &amp; Navigation</a></li><li><a href="/ai-native-textbook-docusaurus/docs/part-4-perception/chapter-13-computer-vision-robots">Computer Vision</a></li><li><a href="/ai-native-textbook-docusaurus/docs/part-5-embodied-intelligence/chapter-17-vision-language-action-models">Machine Learning</a></li><li><a href="/ai-native-textbook-docusaurus/docs/part-3-simulation/chapter-7-gazebo-physics-simulation">Simulation &amp; Control</a></li></ul></div><div class="nm-footer-section"><h4 class="nm-footer-heading">Learning Paths</h4><ul class="nm-footer-links"><li><a href="/ai-native-textbook-docusaurus/beginner">Beginner Track</a></li><li><a href="/ai-native-textbook-docusaurus/intermediate">Intermediate Track</a></li><li><a href="/ai-native-textbook-docusaurus/advanced">Advanced Track</a></li><li><a href="/ai-native-textbook-docusaurus/projects">Hands-on Projects</a></li><li><a href="/ai-native-textbook-docusaurus/certification">Certification</a></li></ul></div><div class="nm-footer-section"><h4 class="nm-footer-heading">Community</h4><ul class="nm-footer-links"><li><a href="https://github.com/NaumanNavaid/ai-native-textbook-docusaurus">GitHub</a></li><li><a href="https://discord.gg/9B6qGRZf">Discord</a></li><li><a href="https://github.com/NaumanNavaid/ai-native-textbook-docusaurus/discussions">Forum</a></li><li><a href="/ai-native-textbook-docusaurus/contributors">Contributors</a></li><li><a href="/ai-native-textbook-docusaurus/blog">Blog</a></li></ul></div><div class="nm-footer-section nm-footer-newsletter"><h4 class="nm-footer-heading">Stay Updated</h4><p class="nm-footer-subtext">Get the latest updates and exclusive content</p><div class="nm-newsletter-form"><input type="email" placeholder="Enter your email" class="nm-newsletter-input"><button type="button" class="nm-newsletter-button">Subscribe</button></div><div class="nm-footer-social"><a href="https://github.com/NaumanNavaid/ai-native-textbook-docusaurus" class="nm-social-link" aria-label="GitHub"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a><a href="https://twitter.com/NStudio" class="nm-social-link" aria-label="Twitter"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a href="https://linkedin.com/company/snn-studio" class="nm-social-link" aria-label="LinkedIn"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div></div></div><div class="nm-footer-bottom"><div class="nm-footer-bottom-left"><span class="nm-footer-copyright">© <!-- -->2025<!-- --> AI-Native Textbook. All rights reserved. Created by SNN Studio.</span></div><div class="nm-footer-bottom-right"><a class="nm-footer-link" href="/ai-native-textbook-docusaurus/privacy">Privacy Policy</a><span class="nm-footer-separator">•</span><a class="nm-footer-link" href="/ai-native-textbook-docusaurus/terms">Terms of Service</a><span class="nm-footer-separator">•</span><a class="nm-footer-link" href="/ai-native-textbook-docusaurus/code-of-conduct">Code of Conduct</a></div></div></div></footer><div class="chat-widget"><button class="chat-widget-button" aria-label="Open chat"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg></button></div></div>
</body>
</html>